/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */(function(a){typeof define=='function'&&define.amd?define(['jquery'],a):typeof exports=='object'?a(require('jquery')):a(window.jQuery||window.Zepto)})(function(b){var k='Close',N='BeforeClose',S='AfterClose',T='BeforeAppend',D='MarkupParse',u='Open',J='Change',E='mfp',e='.'+E,t='mfp-ready',M='mfp-removing',x='mfp-prevent-close',p=function(){},w=!!window.jQuery,i=b(window),d=function(b,c){a.ev.on(E+b+e,c)},m=function(e,c,d,f){var a=document.createElement('div');return a.className='mfp-'+e,d&&(a.innerHTML=d),f?c&&c.appendChild(a):(a=b(a),c&&a.appendTo(c)),a},c=function(c,d){a.ev.triggerHandler(E+c,d),a.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),a.st.callbacks[c]&&a.st.callbacks[c].apply(a,b.isArray(d)?d:[d]))},z=function(c){return(c!==L||!a.currTemplate.closeBtn)&&(a.currTemplate.closeBtn=b(a.st.closeMarkup.replace('%title%',a.st.tClose)),L=c),a.currTemplate.closeBtn},A=function(){b.magnificPopup.instance||(a=new p,a.init(),b.magnificPopup.instance=a)},P=function(){var a=document.createElement('p').style,b=['ms','O','Moz','Webkit'];if(a.transition!==void 0)return!0;while(b.length)if(b.pop()+'Transition'in a)return!0;return!1},G,a,f,s,j,L,C,l,q,r,O,n,o,F,K,g,R,B,U,h,Q,y,v,I,H;p.prototype={constructor:p,init:function(){var c=navigator.appVersion;a.isLowIE=a.isIE8=document.all&&!document.addEventListener,a.isAndroid=/android/gi.test(c),a.isIOS=/iphone|ipad|ipod/gi.test(c),a.supportsTransition=P(),a.probablyMobile=a.isAndroid||a.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),f=b(document),a.popupsCache={}},open:function(g){var h,p,k,q,l,r,n,s,o;if(g.isObj===!1){{a.items=g.items.toArray(),a.index=0,p=g.items;for(h=0;h<p.length;h++)if(k=p[h],k.parsed&&(k=k.el[0]),k===g.el[0]){a.index=h;break}}}else a.items=b.isArray(g.items)?g.items:[g.items],a.index=g.index||0;if(a.isOpen){a.updateItemHTML();return}a.types=[],j='',g.mainEl&&g.mainEl.length?a.ev=g.mainEl.eq(0):a.ev=f,g.key?(a.popupsCache[g.key]||(a.popupsCache[g.key]={}),a.currTemplate=a.popupsCache[g.key]):a.currTemplate={},a.st=b.extend(!0,{},b.magnificPopup.defaults,g),a.fixedContentPos=a.st.fixedContentPos==='auto'?!a.probablyMobile:a.st.fixedContentPos,a.st.modal&&(a.st.closeOnContentClick=!1,a.st.closeOnBgClick=!1,a.st.showCloseBtn=!1,a.st.enableEscapeKey=!1),a.bgOverlay||(a.bgOverlay=m('bg').on('click'+e,function(){a.close()}),a.wrap=m('wrap').attr('tabindex',-1).on('click'+e,function(b){a._checkIfClose(b.target)&&a.close()}),a.container=m('container',a.wrap)),a.contentContainer=m('content'),a.st.preloader&&(a.preloader=m('preloader',a.container,a.st.tLoading)),q=b.magnificPopup.modules;for(h=0;h<q.length;h++)l=q[h],l=l.charAt(0).toUpperCase()+l.slice(1),a['init'+l].call(a);return c('BeforeOpen'),a.st.showCloseBtn&&(a.st.closeBtnInside?(d(D,function(c,d,a,b){a.close_replaceWith=z(b.type)}),j+=' mfp-close-btn-in'):a.wrap.append(z())),a.st.alignTop&&(j+=' mfp-align-top'),a.fixedContentPos?a.wrap.css({overflow:a.st.overflowY,overflowX:'hidden',overflowY:a.st.overflowY}):a.wrap.css({top:i.scrollTop(),position:'absolute'}),(a.st.fixedBgPos===!1||a.st.fixedBgPos==='auto'&&!a.fixedContentPos)&&a.bgOverlay.css({height:f.height(),position:'absolute'}),a.st.enableEscapeKey&&f.on('keyup'+e,function(b){b.keyCode===27&&a.close()}),i.on('resize'+e,function(){a.updateSize()}),a.st.closeOnContentClick||(j+=' mfp-auto-cursor'),j&&a.wrap.addClass(j),r=a.wH=i.height(),n={},a.fixedContentPos&&a._hasScrollBar(r)&&(s=a._getScrollbarSize(),s&&(n.marginRight=s)),a.fixedContentPos&&(a.isIE7?b('body, html').css('overflow','hidden'):n.overflow='hidden'),o=a.st.mainClass,a.isIE7&&(o+=' mfp-ie7'),o&&a._addClassToMFP(o),a.updateItemHTML(),c('BuildControls'),b('html').css(n),a.bgOverlay.add(a.wrap).prependTo(a.st.prependTo||b(document.body)),a._lastFocusedEl=document.activeElement,setTimeout(function(){a.content?(a._addClassToMFP(t),a._setFocus()):a.bgOverlay.addClass(t),f.on('focusin'+e,a._onFocusIn)},16),a.isOpen=!0,a.updateSize(r),c(u),g},close:function(){if(!a.isOpen)return;c(N),a.isOpen=!1,a.st.removalDelay&&!a.isLowIE&&a.supportsTransition?(a._addClassToMFP(M),setTimeout(function(){a._close()},a.st.removalDelay)):a._close()},_close:function(){var d,g;c(k),d=M+' '+t+' ',a.bgOverlay.detach(),a.wrap.detach(),a.container.empty(),a.st.mainClass&&(d+=a.st.mainClass+' '),a._removeClassFromMFP(d),a.fixedContentPos&&(g={marginRight:''},a.isIE7?b('body, html').css('overflow',''):g.overflow='',b('html').css(g)),f.off('keyup'+e+' focusin'+e),a.ev.off(e),a.wrap.attr('class','mfp-wrap').removeAttr('style'),a.bgOverlay.attr('class','mfp-bg'),a.container.attr('class','mfp-container'),a.st.showCloseBtn&&(!a.st.closeBtnInside||a.currTemplate[a.currItem.type]===!0)&&a.currTemplate.closeBtn&&a.currTemplate.closeBtn.detach(),a.st.autoFocusLast&&a._lastFocusedEl&&b(a._lastFocusedEl).focus(),a.currItem=null,a.content=null,a.currTemplate=null,a.prevHeight=0,c(S)},updateSize:function(e){var d,b;a.isIOS?(d=document.documentElement.clientWidth/window.innerWidth,b=window.innerHeight*d,a.wrap.css('height',b),a.wH=b):a.wH=e||i.height(),a.fixedContentPos||a.wrap.css('height',a.wH),c('Resize')},updateItemHTML:function(){var e=a.items[a.index],d,f,g;a.contentContainer.detach(),a.content&&a.content.detach(),e.parsed||(e=a.parseEl(a.index)),d=e.type,c('BeforeChange',[a.currItem?a.currItem.type:'',d]),a.currItem=e,a.currTemplate[d]||(f=!!a.st[d]&&a.st[d].markup,c('FirstMarkupParse',f),f?a.currTemplate[d]=b(f):a.currTemplate[d]=!0),s&&s!==e.type&&a.container.removeClass('mfp-'+s+'-holder'),g=a['get'+d.charAt(0).toUpperCase()+d.slice(1)](e,a.currTemplate[d]),a.appendContent(g,d),e.preloaded=!0,c(J,e),s=e.type,a.container.prepend(a.contentContainer),c('AfterChange')},appendContent:function(b,d){a.content=b,b?a.st.showCloseBtn&&a.st.closeBtnInside&&a.currTemplate[d]===!0?a.content.find('.mfp-close').length||a.content.append(z()):a.content=b:a.content='',c(T),a.container.addClass('mfp-'+d+'-holder'),a.contentContainer.append(a.content)},parseEl:function(e){var d=a.items[e],g,h,f;if(d.tagName?d={el:b(d)}:(g=d.type,d={data:d,src:d.src}),d.el){h=a.types;for(f=0;f<h.length;f++)if(d.el.hasClass('mfp-'+h[f])){g=h[f];break}d.src=d.el.attr('data-mfp-src'),d.src||(d.src=d.el.attr('href'))}return d.type=g||a.st.type||'inline',d.index=e,d.parsed=!0,a.items[e]=d,c('ElementParse',d),a.items[e]},addGroup:function(c,b){var e=function(d){d.mfpEl=this,a._openClick(d,c,b)},d;b||(b={}),d='click.magnificPopup',b.mainEl=c,b.items?(b.isObj=!0,c.off(d).on(d,e)):(b.isObj=!1,b.delegate?c.off(d).on(d,b.delegate,e):(b.items=c,c.off(d).on(d,e)))},_openClick:function(c,f,d){var g=d.midClick!==void 0?d.midClick:b.magnificPopup.defaults.midClick,e;if(!g&&(c.which===2||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey))return;if(e=d.disableOn!==void 0?d.disableOn:b.magnificPopup.defaults.disableOn,e)if(b.isFunction(e)){if(!e.call(a))return!0}else if(i.width()<e)return!0;c.type&&(c.preventDefault(),a.isOpen&&c.stopPropagation()),d.el=b(c.mfpEl),d.delegate&&(d.items=f.find(d.delegate)),a.open(d)},updateStatus:function(b,d){if(a.preloader){G!==b&&a.container.removeClass('mfp-s-'+G),!d&&b==='loading'&&(d=a.st.tLoading);var e={status:b,text:d};c('UpdateStatus',e),b=e.status,d=e.text,a.preloader.html(d),a.preloader.find('a').on('click',function(a){a.stopImmediatePropagation()}),a.container.addClass('mfp-s-'+b),G=b}},_checkIfClose:function(c){var d,e;if(b(c).hasClass(x))return;if(d=a.st.closeOnContentClick,e=a.st.closeOnBgClick,d&&e)return!0;if(!a.content||b(c).hasClass('mfp-close')||a.preloader&&c===a.preloader[0])return!0;if(c!==a.content[0]&&!b.contains(a.content[0],c)){if(e)if(b.contains(document,c))return!0}else if(d)return!0;return!1},_addClassToMFP:function(b){a.bgOverlay.addClass(b),a.wrap.addClass(b)},_removeClassFromMFP:function(b){this.bgOverlay.removeClass(b),a.wrap.removeClass(b)},_hasScrollBar:function(b){return(a.isIE7?f.height():document.body.scrollHeight)>(b||i.height())},_setFocus:function(){(a.st.focus?a.content.find(a.st.focus).eq(0):a.wrap).focus()},_onFocusIn:function(c){if(c.target!==a.wrap[0]&&!b.contains(a.wrap[0],c.target))return a._setFocus(),!1},_parseMarkup:function(f,d,g){var a;g.data&&(d=b.extend(g.data,d)),c(D,[f,d,g]),b.each(d,function(h,d){var c,g;if(d===void 0||d===!1)return!0;a=h.split('_'),a.length>1?(c=f.find(e+'-'+a[0]),c.length>0&&(g=a[1],g==='replaceWith'?c[0]!==d[0]&&c.replaceWith(d):g==='img'?c.is('img')?c.attr('src',d):c.replaceWith(b('<img>').attr('src',d).attr('class',c.attr('class'))):c.attr(a[1],d))):f.find(e+'-'+h).html(d)})},_getScrollbarSize:function(){if(a.scrollbarSize===void 0){var b=document.createElement("div");b.style.cssText='width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;',document.body.appendChild(b),a.scrollbarSize=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return a.scrollbarSize}},b.magnificPopup={instance:null,proto:p.prototype,modules:[],open:function(a,c){return A(),a?a=b.extend(!0,{},a):a={},a.isObj=!0,a.index=c||0,this.instance.open(a)},close:function(){return b.magnificPopup.instance&&b.magnificPopup.instance.close()},registerModule:function(c,a){a.options&&(b.magnificPopup.defaults[c]=a.options),b.extend(this.proto,a.proto),this.modules.push(c)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:'',preloader:!0,focus:'',closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:'auto',fixedBgPos:'auto',overflowY:'auto',closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:'Close (Esc)',tLoading:'Loading...',autoFocusLast:!0}},b.fn.magnificPopup=function(d){var c,e,f,g;return A(),c=b(this),typeof d=="string"?d==='open'?(f=w?c.data('magnificPopup'):c[0].magnificPopup,g=parseInt(arguments[1],10)||0,f.items?e=f.items[g]:(e=c,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),a._openClick({mfpEl:e},c,f)):a.isOpen&&a[d].apply(a,Array.prototype.slice.call(arguments,1)):(d=b.extend(!0,{},d),w?c.data('magnificPopup',d):c[0].magnificPopup=d,a.addGroup(c,d)),c},C='inline',O=function(){r&&(q.after(r.addClass(l)).detach(),r=null)},b.magnificPopup.registerModule(C,{options:{hiddenClass:'hide',markup:'',tNotFound:'Content not found'},proto:{initInline:function(){a.types.push(C),d(k+'.'+C,function(){O()})},getInline:function(d,g){var e,c,f;return O(),d.src?(e=a.st.inline,c=b(d.src),c.length?(f=c[0].parentNode,f&&f.tagName&&(q||(l=e.hiddenClass,q=m(l),l='mfp-'+l),r=c.after(q).detach().removeClass(l)),a.updateStatus('ready')):(a.updateStatus('error',e.tNotFound),c=b('<div>')),d.inlineElement=c,c):(a.updateStatus('ready'),a._parseMarkup(g,{},d),g)}}}),n='ajax',F=function(){o&&b(document.body).removeClass(o)},K=function(){F(),a.req&&a.req.abort()},b.magnificPopup.registerModule(n,{options:{settings:null,cursor:'mfp-ajax-cur',tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){a.types.push(n),o=a.st.ajax.cursor,d(k+'.'+n,K),d('BeforeChange.'+n,K)},getAjax:function(d){o&&b(document.body).addClass(o),a.updateStatus('loading');var e=b.extend({url:d.src,success:function(f,h,g){var e={data:f,xhr:g};c('ParseAjax',e),a.appendContent(b(e.data),n),d.finished=!0,F(),a._setFocus(),setTimeout(function(){a.wrap.addClass(t)},16),a.updateStatus('ready'),c('AjaxContentAdded')},error:function(){F(),d.finished=d.loadError=!0,a.updateStatus('error',a.st.ajax.tError.replace('%url%',d.src))}},a.st.ajax.settings);return a.req=b.ajax(e),''}}}),R=function(c){if(c.data&&c.data.title!==void 0)return c.data.title;var d=a.st.image.titleSrc;if(d){if(b.isFunction(d))return d.call(a,c);if(c.el)return c.el.attr(d)||''}return''},b.magnificPopup.registerModule('image',{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:'mfp-zoom-out-cur',titleSrc:'title',verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=a.st.image,f='.image';a.types.push('image'),d(u+f,function(){a.currItem.type==='image'&&c.cursor&&b(document.body).addClass(c.cursor)}),d(k+f,function(){c.cursor&&b(document.body).removeClass(c.cursor),i.off('resize'+e)}),d('Resize'+f,a.resizeImage),a.isLowIE&&d('AfterChange',a.resizeImage)},resizeImage:function(){var b=a.currItem,c;if(!b||!b.img)return;a.st.image.verticalFit&&(c=0,a.isLowIE&&(c=parseInt(b.img.css('padding-top'),10)+parseInt(b.img.css('padding-bottom'),10)),b.img.css('max-height',a.wH-c))},_onImageHasSize:function(b){b.img&&(b.hasSize=!0,g&&clearInterval(g),b.isCheckingImgSize=!1,c('ImageHasSize',b),b.imgHidden&&(a.content&&a.content.removeClass('mfp-loading'),b.imgHidden=!1))},findImageSize:function(d){var b=0,e=d.img[0],c=function(f){g&&clearInterval(g),g=setInterval(function(){if(e.naturalWidth>0){a._onImageHasSize(d);return}b>200&&clearInterval(g),b++,b===3?c(10):b===40?c(50):b===100&&c(500)},f)};c(1)},getImage:function(d,e){var h=0,i=function(){d&&(d.img[0].complete?(d.img.off('.mfploader'),d===a.currItem&&(a._onImageHasSize(d),a.updateStatus('ready')),d.hasSize=!0,d.loaded=!0,c('ImageLoadComplete')):(h++,h<200?setTimeout(i,100):j()))},j=function(){d&&(d.img.off('.mfploader'),d===a.currItem&&(a._onImageHasSize(d),a.updateStatus('error',k.tError.replace('%url%',d.src))),d.hasSize=!0,d.loaded=!0,d.loadError=!0)},k=a.st.image,l=e.find('.mfp-img'),f;return l.length&&(f=document.createElement('img'),f.className='mfp-img',d.el&&d.el.find('img').length&&(f.alt=d.el.find('img').attr('alt')),d.img=b(f).on('load.mfploader',i).on('error.mfploader',j),f.src=d.src,l.is('img')&&(d.img=d.img.clone()),f=d.img[0],f.naturalWidth>0?d.hasSize=!0:f.width||(d.hasSize=!1)),a._parseMarkup(e,{title:R(d),img_replaceWith:d.img},d),a.resizeImage(),d.hasSize?(g&&clearInterval(g),d.loadError?(e.addClass('mfp-loading'),a.updateStatus('error',k.tError.replace('%url%',d.src))):(e.removeClass('mfp-loading'),a.updateStatus('ready')),e):(a.updateStatus('loading'),d.loading=!0,d.hasSize||(d.imgHidden=!0,e.addClass('mfp-loading'),a.findImageSize(d)),e)}}}),U=function(){return B===void 0&&(B=document.createElement('p').style.MozTransform!==void 0),B},b.magnificPopup.registerModule('zoom',{options:{enabled:!1,easing:'ease-in-out',duration:300,opener:function(a){return a.is('img')?a:a.find('img')}},proto:{initZoom:function(){var f=a.st.zoom,i='.zoom',e,j,l,h,g,b;if(!f.enabled||!a.supportsTransition)return;j=f.duration,l=function(d){var c=d.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),e='all '+f.duration/1e3+'s '+f.easing,a={position:'fixed',zIndex:9999,left:0,top:0,'-webkit-backface-visibility':'hidden'},b='transition';return a['-webkit-'+b]=a['-moz-'+b]=a['-o-'+b]=a[b]=e,c.css(a),c},h=function(){a.content.css('visibility','visible')},d('BuildControls'+i,function(){if(a._allowZoom()){if(clearTimeout(g),a.content.css('visibility','hidden'),e=a._getItemToZoom(),!e){h();return}b=l(e),b.css(a._getOffset()),a.wrap.append(b),g=setTimeout(function(){b.css(a._getOffset(!0)),g=setTimeout(function(){h(),setTimeout(function(){b.remove(),e=b=null,c('ZoomAnimationEnded')},16)},j)},16)}}),d(N+i,function(){if(a._allowZoom()){if(clearTimeout(g),a.st.removalDelay=j,!e){if(e=a._getItemToZoom(),!e)return;b=l(e)}b.css(a._getOffset(!0)),a.wrap.append(b),a.content.css('visibility','hidden'),setTimeout(function(){b.css(a._getOffset())},16)}}),d(k+i,function(){a._allowZoom()&&(h(),b&&b.remove(),e=null)})},_allowZoom:function(){return a.currItem.type==='image'},_getItemToZoom:function(){return!!a.currItem.hasSize&&a.currItem.img},_getOffset:function(g){var c,d,f,h,e;return g?c=a.currItem.img:c=a.st.zoom.opener(a.currItem.el||a.currItem),d=c.offset(),f=parseInt(c.css('padding-top'),10),h=parseInt(c.css('padding-bottom'),10),d.top-=b(window).scrollTop()-f,e={width:c.width(),height:(w?c.innerHeight():c[0].offsetHeight)-h-f},U()?e['-moz-transform']=e.transform='translate('+d.left+'px,'+d.top+'px)':(e.left=d.left,e.top=d.top),e}}}),h='iframe',Q='//about:blank',y=function(c){if(a.currTemplate[h]){var b=a.currTemplate[h].find('iframe');b.length&&(c||(b[0].src=Q),a.isIE8&&b.css('display',c?'block':'none'))}},b.magnificPopup.registerModule(h,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:'iframe_src',patterns:{youtube:{index:'youtube.com',id:'v=',src:'//www.youtube.com/embed/%id%?autoplay=1'},vimeo:{index:'vimeo.com/',id:'/',src:'//player.vimeo.com/video/%id%?autoplay=1'},gmaps:{index:'//maps.google.',src:'%id%&output=embed'}}},proto:{initIframe:function(){a.types.push(h),d('BeforeChange',function(c,a,b){a!==b&&(a===h?y():b===h&&y(!0))}),d(k+'.'+h,function(){y()})},getIframe:function(e,f){var c=e.src,d=a.st.iframe,g;return b.each(d.patterns,function(){if(c.indexOf(this.index)>-1)return this.id&&(typeof this.id=='string'?c=c.substr(c.lastIndexOf(this.id)+this.id.length,c.length):c=this.id.call(this,c)),c=this.src.replace('%id%',c),!1}),g={},d.srcAction&&(g[d.srcAction]=c),a._parseMarkup(f,g,e),a.updateStatus('ready'),f}}}),v=function(b){var c=a.items.length;return b>c-1?b-c:b<0?c+b:b},I=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)},b.magnificPopup.registerModule('gallery',{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:'Previous (Left arrow key)',tNext:'Next (Right arrow key)',tCounter:'%curr% of %total%'},proto:{initGallery:function(){var e=a.st.gallery,c='.mfp-gallery';if(a.direction=!0,!e||!e.enabled)return!1;j+=' mfp-gallery',d(u+c,function(){e.navigateByImgClick&&a.wrap.on('click'+c,'.mfp-img',function(){if(a.items.length>1)return a.next(),!1}),f.on('keydown'+c,function(b){b.keyCode===37?a.prev():b.keyCode===39&&a.next()})}),d('UpdateStatus'+c,function(c,b){b.text&&(b.text=I(b.text,a.currItem.index,a.items.length))}),d(D+c,function(f,g,c,d){var b=a.items.length;c.counter=b>1?I(e.tCounter,d.index,b):''}),d('BuildControls'+c,function(){if(a.items.length>1&&e.arrows&&!a.arrowLeft){var c=e.arrowMarkup,d=a.arrowLeft=b(c.replace(/%title%/gi,e.tPrev).replace(/%dir%/gi,'left')).addClass(x),f=a.arrowRight=b(c.replace(/%title%/gi,e.tNext).replace(/%dir%/gi,'right')).addClass(x);d.click(function(){a.prev()}),f.click(function(){a.next()}),a.container.append(d.add(f))}}),d(J+c,function(){a._preloadTimeout&&clearTimeout(a._preloadTimeout),a._preloadTimeout=setTimeout(function(){a.preloadNearbyImages(),a._preloadTimeout=null},16)}),d(k+c,function(){f.off(c),a.wrap.off('click'+c),a.arrowRight=a.arrowLeft=null})},next:function(){a.direction=!0,a.index=v(a.index+1),a.updateItemHTML()},prev:function(){a.direction=!1,a.index=v(a.index-1),a.updateItemHTML()},goTo:function(b){a.direction=b>=a.index,a.index=b,a.updateItemHTML()},preloadNearbyImages:function(){var c=a.st.gallery.preload,d=Math.min(c[0],a.items.length),e=Math.min(c[1],a.items.length),b;for(b=1;b<=(a.direction?e:d);b++)a._preloadItem(a.index+b);for(b=1;b<=(a.direction?d:e);b++)a._preloadItem(a.index-b)},_preloadItem:function(e){if(e=v(e),a.items[e].preloaded)return;var d=a.items[e];d.parsed||(d=a.parseEl(e)),c('LazyLoad',d),d.type==='image'&&(d.img=b('<img class="mfp-img" />').on('load.mfploader',function(){d.hasSize=!0}).on('error.mfploader',function(){d.hasSize=!0,d.loadError=!0,c('LazyLoadError',d)}).attr('src',d.src)),d.preloaded=!0}}}),H='retina',b.magnificPopup.registerModule(H,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return'@2x'+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var c=a.st.retina,b=c.ratio;b=isNaN(b)?b():b,b>1&&(d('ImageHasSize.'+H,function(c,a){a.img.css({'max-width':a.img[0].naturalWidth/b,width:'100%'})}),d('ElementParse.'+H,function(d,a){a.src=c.replaceSrc(a,b)}))}}}}),A()})